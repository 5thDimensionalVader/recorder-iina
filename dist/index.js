!function(){function e(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,i)}"function"==typeof SuppressedError&&SuppressedError,iina.console;var t=iina.menu,n=iina.core,r=(iina.event,iina.mpv),i=iina.utils,o=iina.overlay,a=iina.sidebar;function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"15px",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o.simpleMode(),o.setContent(`<p>${e}</p>`),o.setStyle(`p { color: ${n?"red":"green"}; font-size: ${t}; margin-top: 40px;}`),o.show(),setTimeout(function(){o.hide()},3e3)}a.loadFile("dist/ui/window/index.html"),a.onMessage("getEndTime",function(){var e=r.getNumber("time-pos");a.postMessage("endTime",{time:e}),n.pause()}),a.onMessage("processVideoClip",function(t){var n,o=t.startPos,c=t.endPos;(n=function(){var e,t;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){var u=[s,c];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(!i.fileInPath("/opt/homebrew/bin/ffmpeg"))return[3,2];return s("Processing ..."),[4,i.exec("/opt/homebrew/bin/ffmpeg",["-i",r.getString("path"),"-ss",o,"-to",c,"-crf","21","-c:v","libx264","-c:a","copy","-movflags","+faststart",`${r.getString("path").substring(0,r.getString("path").lastIndexOf("/"))}/${r.getString("filename")}_clip.mov`])];case 1:return t=(e=n.sent()).status,e.stderr,0==t?(s("Clipping processed successfully!","18px"),a.hide()):s(`FFmpeg error code ${t}`,"18px",!0),[3,3];case 2:s("ffmpeg not found",!0),n.label=3;case 3:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(i,o){var a=n.apply(t,r);function s(t){e(a,i,o,s,c,"next",t)}function c(t){e(a,i,o,s,c,"throw",t)}s(void 0)})})()}),a.onMessage("closeWindow",function(){a.hide()});var c=t.item("Start Clipping",function(){var e;a.show(),e=r.getNumber("time-pos"),a.postMessage("currentTime",{time:e})},{keyBinding:"Alt+Shift+r"});t.addItem(c)}();
//# sourceMappingURL=index.js.map
